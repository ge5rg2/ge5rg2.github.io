---
layout: post
title: "Routing pages in Next.js"
summary: "Routing pages in Next.js"
author: ge5rg2
date: "2023-05-02 11:40:05 +0900"
category: next
thumbnail: /assets/img/next/next.png
keywords: next
permalink: /blog/next-js/2
usemathjax: true
---

[Reference](https://codingapple.com/)

# Routing pages in Next.js

Next.js version

`"next": "13.2.4‚Äù`

<br/>

![sc1](https://file.notion.so/f/s/b4eb4c03-8959-4b68-8f05-4a3a452923e2/Untitled.png?id=9d0a812f-abf9-4c8f-b4d0-92b497213235&table=block&spaceId=09535c88-7789-4820-9158-4ae62342203e&expirationTimestamp=1683083115538&signature=9iWo2G48IdRD3mJV-wNe1FqFf6ZNdCpo9oJJ1oTLp-4&downloadName=Untitled.png)

If you set up the following on initial installation

![sc2](https://file.notion.so/f/s/e3bdce0f-46b8-4ac5-9c7e-1f6163ba2a99/Untitled.png?id=e00c6792-eb2d-4ee4-9ca4-e051146d7c34&table=block&spaceId=09535c88-7789-4820-9158-4ae62342203e&expirationTimestamp=1683083139877&signature=MbOaKHi6TohRIaFydaUUsimi3WYpJjS2rqn8TckJVLU&downloadName=Untitled.png)

The files you create in the app folder sub-item become pages on the web.

The `layout.js` file creates the parts of the page that will be visible on all pages, such as the navbar.

```jsx
import "./globals.css";
import Link from "next/link";

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>
        <div className="navbar">
          <Link href="/" className="logo">
            Appleforum
          </Link>
          <Link href="/write">Write</Link>
          <Link href="/list">List</Link>
          <Link href="/signin">SignIn</Link>
        </div>
        {children}
      </body>
    </html>
  );
}
```

<br/>

In `Next.js`, most of the components work server side,

To use features like `useEfect`, `useState`, etc.

At the top of the file

`"use client";` at the top of the file.

```jsx
"use client"; // At the top, declare something like

import Link from "next/link";

export default function ListItem({ result }) {
  const onDeleteClick = (uid) => {
    fetch(`/api/delete/${uid}`)
      .then((r) => r.json())
      .then((result) => {
        if (result.deletedCount === 1) {
          return window.location.reload();
        } else {
          //Code to run when the server sends an error code
        }
      })
      .then((result) => {
        //Code to run on success
      })
      .catch((error) => {
        //Code to run when failing due to internet problems
        console.log(error);
      });
  };
  return (
    <div>
      {result.map((el) => {
        return (
          <div className="list-item" key={el._id}>
            <Link style={{ textDecoration: "none" }} href={`/detail/${el._id}`}>
              <h4>{el.title}</h4>
            </Link>....
```

<br/>

However, since `db` cannot be called directly from a file that declares `"use client";`, it is common to make a call to `server` as shown in the code above.
